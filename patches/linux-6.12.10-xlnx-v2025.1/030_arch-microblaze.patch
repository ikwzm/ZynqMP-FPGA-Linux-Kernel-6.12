--- linux-6.12.10/arch/microblaze/configs/mmu_defconfig	2025-07-02 11:58:34.449715600 +0900
+++ linux-xlnx-2025.1/arch/microblaze/configs/mmu_defconfig	2025-07-02 12:01:18.012466400 +0900
@@ -43,7 +43,6 @@
 CONFIG_NETDEVICES=y
 CONFIG_XILINX_EMACLITE=y
 CONFIG_XILINX_AXI_EMAC=y
-CONFIG_XILINX_LL_TEMAC=y
 CONFIG_MARVELL_PHY=y
 # CONFIG_INPUT is not set
 # CONFIG_SERIO is not set
@@ -70,6 +69,8 @@
 CONFIG_FB=y
 CONFIG_FB_XILINX=y
 # CONFIG_USB_SUPPORT is not set
+CONFIG_DMADEVICES=y
+CONFIG_XILINX_DMA=y
 CONFIG_UIO=y
 CONFIG_UIO_PDRV_GENIRQ=y
 CONFIG_UIO_DMEM_GENIRQ=y
--- linux-6.12.10/arch/microblaze/include/asm/sections.h	2025-07-02 11:58:34.463807500 +0900
+++ linux-xlnx-2025.1/arch/microblaze/include/asm/sections.h	2025-07-02 12:01:18.025521200 +0900
@@ -14,6 +14,9 @@
 extern char _ssbss[], _esbss[];
 extern unsigned long __ivt_start[], __ivt_end[];
 
+extern char __initramfs_end[];
+extern char _end_tlb_mapping[];
+
 extern u32 _fdt_start[], _fdt_end[];
 
 # endif /* !__ASSEMBLY__ */
--- linux-6.12.10/arch/microblaze/kernel/head.S	2025-07-02 11:58:34.477921400 +0900
+++ linux-xlnx-2025.1/arch/microblaze/kernel/head.S	2025-07-02 12:01:18.039843900 +0900
@@ -173,9 +173,8 @@
 	tophys(r4,r3)			/* Load the kernel physical address */
 
 	/* start to do TLB calculation */
-	addik	r12, r0, _end
+	addik	r12, r0, _end_tlb_mapping
 	rsub	r12, r3, r12
-	addik	r12, r12, CONFIG_LOWMEM_SIZE >> PTE_SHIFT /* that's the pad */
 
 	or r9, r0, r0 /* TLB0 = 0 */
 	or r10, r0, r0 /* TLB1 = 0 */
--- linux-6.12.10/arch/microblaze/kernel/setup.c	2025-07-02 11:58:34.482005100 +0900
+++ linux-xlnx-2025.1/arch/microblaze/kernel/setup.c	2025-07-02 12:01:18.043833700 +0900
@@ -132,7 +132,7 @@
 	if (fdt)
 		pr_info("FDT at 0x%08x\n", fdt);
 	else
-		pr_info("Compiled-in FDT at %p\n", _fdt_start);
+		pr_info("Compiled-in FDT at 0x%08x\n", (unsigned)&_fdt_start);
 
 #ifdef CONFIG_MTD_UCLINUX
 	pr_info("Found romfs @ 0x%08x (0x%08x)\n",
--- linux-6.12.10/arch/microblaze/kernel/vmlinux.lds.S	2025-07-02 11:58:34.485995000 +0900
+++ linux-xlnx-2025.1/arch/microblaze/kernel/vmlinux.lds.S	2025-07-02 12:01:18.046825900 +0900
@@ -119,12 +119,6 @@
 		CON_INITCALL
 	}
 
-	__init_end_before_initramfs = .;
-
-	.init.ramfs : AT(ADDR(.init.ramfs) - LOAD_OFFSET) {
-		INIT_RAM_FS
-	}
-
 	__init_end = .;
 
 	.bss ALIGN (PAGE_SIZE) : AT(ADDR(.bss) - LOAD_OFFSET) {
@@ -137,6 +131,15 @@
 	}
 	. = ALIGN(PAGE_SIZE);
 	_end = .;
+	/* Add space in TLB mapping for early free pages mapping */
+	. = . + 0x100000; /* CONFIG_LOWMEM_SIZE >> PTE_SHIFT + space */
+
+	_end_tlb_mapping = . ;
+
+	.init.ramfs : AT(ADDR(.init.ramfs) - LOAD_OFFSET) {
+		INIT_RAM_FS
+	}
+	__initramfs_end = . ;
 
 	DISCARDS
 }
--- linux-6.12.10/arch/microblaze/mm/init.c	2025-07-02 11:58:34.493028500 +0900
+++ linux-xlnx-2025.1/arch/microblaze/mm/init.c	2025-07-02 12:01:18.054941000 +0900
@@ -192,6 +192,7 @@
 asmlinkage void __init mmu_init(void)
 {
 	unsigned int kstart, ksize;
+	phys_addr_t __maybe_unused size;
 
 	if ((u32) memblock.memory.regions[0].size < 0x400000) {
 		pr_emerg("Memory must be greater than 4MB\n");
@@ -228,10 +229,14 @@
 #if defined(CONFIG_BLK_DEV_INITRD)
 	/* Remove the init RAM disk from the available memory. */
 	if (initrd_start) {
-		unsigned long size;
 		size = initrd_end - initrd_start;
 		memblock_reserve(__virt_to_phys(initrd_start), size);
 	}
+
+	size = __initramfs_end - __initramfs_start;
+	if (size)
+		memblock_reserve((phys_addr_t)__virt_to_phys(__initramfs_start),
+				 size);
 #endif /* CONFIG_BLK_DEV_INITRD */
 
 	/* Initialize the MMU hardware */
